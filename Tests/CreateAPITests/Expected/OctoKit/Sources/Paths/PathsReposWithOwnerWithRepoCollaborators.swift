// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation
import Get
import HTTPHeaders
import URLQueryEncoder

extension Paths.Repos.WithOwner.WithRepo {
    public var collaborators: Collaborators {
        Collaborators(path: path + "/collaborators")
    }

    public struct Collaborators {
        /// Path: `/repos/{owner}/{repo}/collaborators`
        public let path: String

        /// List repository collaborators
        ///
        /// For organization-owned repositories, the list of collaborators includes outside collaborators, organization members that are direct collaborators, organization members with access through team memberships, organization members with access through default organization permissions, and organization owners.
        /// 
        /// Team members will include the members of child teams.
        /// 
        /// You must have push access to the repository in order to list collaborators.
        ///
        /// [API method documentation](https://docs.github.com/rest/reference/repos#list-repository-collaborators)
        public func get(parameters: GetParameters? = nil) -> Request<[OctoKit.Collaborator]> {
            Request(method: "GET", url: path, query: parameters?.asQuery, id: "repos/list-collaborators")
        }

        public enum GetResponseHeaders {
            public static let link = HTTPHeader<String>(field: "Link")
        }

        public struct GetParameters {
            public var affiliation: Affiliation?
            public var perPage: Int?
            public var page: Int?

            public enum Affiliation: String, Codable, CaseIterable {
                case outside
                case direct
                case all
            }

            public init(affiliation: Affiliation? = nil, perPage: Int? = nil, page: Int? = nil) {
                self.affiliation = affiliation
                self.perPage = perPage
                self.page = page
            }

            public var asQuery: [(String, String?)] {
                let encoder = URLQueryEncoder()
                encoder.encode(affiliation, forKey: "affiliation")
                encoder.encode(perPage, forKey: "per_page")
                encoder.encode(page, forKey: "page")
                return encoder.items
            }
        }
    }
}

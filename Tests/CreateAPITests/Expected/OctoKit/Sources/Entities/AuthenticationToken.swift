// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation
import NaiveDate

public struct AuthenticationToken: Codable {
    /// The token used for authentication
    ///
    /// Example: "v1.1f699f1069f60xxx"
    public var token: String
    /// The time this token expires
    ///
    /// Example: "2016-07-11T22:14:10Z"
    public var expiresAt: Date
    /// Example:
    ///
    /// {
    ///   "deployments" : "write",
    ///   "issues" : "read"
    /// }
    public var permissions: [String: AnyJSON]?
    /// The repositories this token has access to
    public var repositories: [Repository]?
    /// Example: "config.yaml"
    public var singleFile: String?
    /// Describe whether all repositories have been selected or there's a selection involved
    public var repositorySelection: RepositorySelection?

    /// Describe whether all repositories have been selected or there's a selection involved
    public enum RepositorySelection: String, Codable, CaseIterable {
        case all
        case selected
    }

    public init(token: String, expiresAt: Date, permissions: [String: AnyJSON]? = nil, repositories: [Repository]? = nil, singleFile: String? = nil, repositorySelection: RepositorySelection? = nil) {
        self.token = token
        self.expiresAt = expiresAt
        self.permissions = permissions
        self.repositories = repositories
        self.singleFile = singleFile
        self.repositorySelection = repositorySelection
    }

    private enum CodingKeys: String, CodingKey {
        case token
        case expiresAt = "expires_at"
        case permissions
        case repositories
        case singleFile = "single_file"
        case repositorySelection = "repository_selection"
    }
}
